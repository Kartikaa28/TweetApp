{"ast":null,"code":"import { Likes, Tweets } from '../service/data/tweets-data.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../service/data/tweets-data.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction HomeComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.messageForTweet, \" \");\n  }\n}\n\nfunction HomeComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.tweetsToShow, \" \");\n  }\n}\n\nfunction HomeComponent_li_22_small_15_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const l_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(l_r5.likes);\n  }\n}\n\nfunction HomeComponent_li_22_small_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 20);\n    i0.ɵɵtemplate(1, HomeComponent_li_22_small_15_ng_container_1_Template, 2, 1, \"ng-container\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const l_r5 = ctx.$implicit;\n    const tweet_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", tweet_r3.id === l_r5.id && l_r5.likes != 0);\n  }\n}\n\nfunction HomeComponent_li_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 12)(1, \"h5\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 14);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 15)(6, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function HomeComponent_li_22_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const tweet_r3 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.deleteTweet(tweet_r3.id);\n    });\n    i0.ɵɵelementStart(7, \"i\", 17);\n    i0.ɵɵtext(8, \"delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function HomeComponent_li_22_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const tweet_r3 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.updateTweet(tweet_r3.id);\n    });\n    i0.ɵɵelementStart(10, \"i\", 17);\n    i0.ɵɵtext(11, \"edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function HomeComponent_li_22_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const tweet_r3 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.updateLikes(tweet_r3.id);\n    });\n    i0.ɵɵelementStart(13, \"i\", 17);\n    i0.ɵɵtext(14, \"thumb_up\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, HomeComponent_li_22_small_15_Template, 2, 1, \"small\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function HomeComponent_li_22_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const tweet_r3 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.checkComments(tweet_r3.id);\n    });\n    i0.ɵɵelementStart(17, \"i\", 17);\n    i0.ɵɵtext(18, \"comment\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"small\", 19);\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const tweet_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"@\", tweet_r3.loginId, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tweet_r3.tweets);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.likes);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(21, 4, tweet_r3.date, \"dd MMM yyyy, h:mm a\"));\n  }\n}\n\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(route, service, router) {\n      this.route = route;\n      this.service = service;\n      this.router = router;\n      this.tweets = [];\n      this.like = {\n        id: 0,\n        likes: 0\n      };\n      this.likes = [];\n      this.name = '';\n      this.tweet = '';\n      this.tweetInValid = false;\n      this.messageForTweet = '';\n      this.id = -1;\n      this.tweetsToShow = '';\n      this.tags = '';\n    }\n\n    ngOnInit() {\n      this.name = this.route.snapshot.params['loginId'];\n      this.service.getTweetsofUser(this.name).subscribe(response => {\n        this.tweets = response;\n\n        if (!this.tweets.length) {\n          this.tweetsToShow = \"You haven't tweeted recently.\";\n        }\n      });\n      this.service.getAllLikes().subscribe(data => {\n        this.likes = data;\n      });\n    }\n\n    postTweet() {\n      if (this.tweet === '') {\n        this.tweetInValid = true;\n        this.messageForTweet = \"Please type something before posting the tweet.\";\n      } else {\n        this.tweetInValid = false;\n        this.service.postTweets(this.name, new Tweets(this.id, this.name, this.tweet + \" \" + this.tags, new Date())).subscribe(response => {\n          this.tweet = '';\n          this.router.navigate(['tweets', this.name, 'home']).then(() => {\n            window.location.reload();\n          });\n        });\n      }\n    }\n\n    deleteTweet(id) {\n      this.service.deleteTweet(id).subscribe(response => {\n        this.router.navigate(['tweets', this.name, 'home']).then(() => {\n          window.location.reload();\n        });\n      });\n      this.service.deleteLikes(id).subscribe();\n    }\n\n    updateTweet(id) {\n      this.router.navigate(['tweets', this.name, 'update-tweet', id]);\n    }\n\n    updateLikes(id) {\n      this.service.getLikes(id).subscribe(response => {\n        this.like = response;\n\n        if (this.like === null) {\n          this.service.updateLikes(-1, new Likes(id, 1), this.name).subscribe(data => {\n            this.router.navigate(['tweets', this.name, 'home']).then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          this.like.likes = this.like.likes + 1;\n          this.service.updateLikes(this.like.id, this.like, this.name).subscribe(data => {\n            this.router.navigate(['tweets', this.name, 'home']).then(() => {\n              window.location.reload();\n            });\n          });\n        }\n      });\n    }\n\n    checkComments(tweetId) {\n      this.router.navigate(['tweets', this.name, 'comments', tweetId]);\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TweetsDataService), i0.ɵɵdirectiveInject(i1.Router));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 23,\n    vars: 6,\n    consts: [[1, \"card\"], [1, \"card-body\"], [1, \"container\"], [1, \"card-header\"], [1, \"form-group\"], [\"rows\", \"3\", \"maxlength\", \"144\", \"placeholder\", \"What's going on your mind?\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"rows\", \"2\", \"maxlength\", \"50\", \"placeholder\", \"Add tags (Optional)\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"list-group\"], [\"class\", \"list-group-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"alert\", \"alert-warning\"], [1, \"list-group-item\"], [1, \"semibold\", \"ellipsis\", \"nm\", \"font-italic\"], [1, \"nm\"], [1, \"button\"], [3, \"click\"], [1, \"material-icons\"], [\"class\", \"badge badge-primary badge-pill\", \"style\", \"background-color:rgb(33, 150, 70)\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-muted\"], [1, \"badge\", \"badge-primary\", \"badge-pill\", 2, \"background-color\", \"rgb(33, 150, 70)\"], [4, \"ngIf\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵtext(4, \"Welcome \");\n        i0.ɵɵelementStart(5, \"i\");\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 4)(8, \"textarea\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_textarea_ngModelChange_8_listener($event) {\n          return ctx.tweet = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 4)(10, \"textarea\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_textarea_ngModelChange_10_listener($event) {\n          return ctx.tags = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(11, HomeComponent_div_11_Template, 2, 1, \"div\", 7);\n        i0.ɵɵelementStart(12, \"div\")(13, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_13_listener() {\n          return ctx.postTweet();\n        });\n        i0.ɵɵtext(14, \"Post Tweet\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(15, \"div\", 0)(16, \"div\", 1)(17, \"div\", 2)(18, \"div\", 3);\n        i0.ɵɵtext(19, \"My Tweets\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, HomeComponent_div_20_Template, 2, 1, \"div\", 7);\n        i0.ɵɵelementStart(21, \"ul\", 9);\n        i0.ɵɵtemplate(22, HomeComponent_li_22_Template, 22, 7, \"li\", 10);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\"@\", ctx.name, \"!\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.tweet);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.tags);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.tweetInValid);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.tweetsToShow);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tweets);\n      }\n    },\n    directives: [i3.DefaultValueAccessor, i3.MaxLengthValidator, i3.NgControlStatus, i3.NgModel, i4.NgIf, i4.NgForOf],\n    pipes: [i4.DatePipe],\n    styles: [\".button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;border:none;color:#509ff9}li[_ngcontent-%COMP%]{border-left:1rems;border-right:1rems;box-shadow:5px 10px #509ff9}.tweet[_ngcontent-%COMP%]{padding-bottom:1%;padding-top:.5%}h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#594e4e}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-bottom:10px;color:#ffc096;background-color:#509ff9;font-size:larger;font-weight:600}button[_ngcontent-%COMP%]{background-color:#509ff9;color:#ffc096;font-weight:600}label[_ngcontent-%COMP%]{color:#fe9e5e;font-weight:600}.card[_ngcontent-%COMP%]{border:none}\"]\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}