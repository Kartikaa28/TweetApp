{"ast":null,"code":"import { Likes } from '../service/data/tweets-data.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/data/tweets-data.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nfunction TweetsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.tweetsToShow, \" \");\n  }\n}\n\nfunction TweetsComponent_li_7_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 16)(1, \"h5\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const tweet_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate2(\"routerLink\", \"/tweets/\", ctx_r3.loginId, \"/user/\", tweet_r2.loginId, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"@\", tweet_r2.loginId, \"\");\n  }\n}\n\nfunction TweetsComponent_li_7_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 16)(1, \"h5\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const tweet_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/tweets/\", ctx_r4.loginId, \"/home\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"@\", tweet_r2.loginId, \"\");\n  }\n}\n\nfunction TweetsComponent_li_7_small_9_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const l_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(l_r8.likes);\n  }\n}\n\nfunction TweetsComponent_li_7_small_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 18);\n    i0.ɵɵtemplate(1, TweetsComponent_li_7_small_9_ng_container_1_Template, 2, 1, \"ng-container\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const l_r8 = ctx.$implicit;\n    const tweet_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", tweet_r2.id === l_r8.id && l_r8.likes != 0);\n  }\n}\n\nfunction TweetsComponent_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 8);\n    i0.ɵɵtemplate(1, TweetsComponent_li_7_a_1_Template, 3, 3, \"a\", 9);\n    i0.ɵɵtemplate(2, TweetsComponent_li_7_a_2_Template, 3, 2, \"a\", 9);\n    i0.ɵɵelementStart(3, \"p\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 11)(6, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function TweetsComponent_li_7_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const tweet_r2 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.updateLikes(tweet_r2.id);\n    });\n    i0.ɵɵelementStart(7, \"i\", 13);\n    i0.ɵɵtext(8, \"thumb_up\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, TweetsComponent_li_7_small_9_Template, 2, 1, \"small\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function TweetsComponent_li_7_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const tweet_r2 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.checkComments(tweet_r2.id);\n    });\n    i0.ɵɵelementStart(11, \"i\", 13);\n    i0.ɵɵtext(12, \"comment\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"small\", 15);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const tweet_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r1.loginId === tweet_r2.loginId));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loginId === tweet_r2.loginId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tweet_r2.tweets);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.likes);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 5, tweet_r2.date, \"dd MMM yyyy, h:mm a\"));\n  }\n}\n\nexport let TweetsComponent = /*#__PURE__*/(() => {\n  class TweetsComponent {\n    constructor(service, router, route) {\n      this.service = service;\n      this.router = router;\n      this.route = route;\n      this.like = {\n        id: 0,\n        likes: 0\n      };\n      this.likes = [];\n      this.tweets = [];\n      this.tweetsToShow = '';\n      this.loginId = '';\n    }\n\n    ngOnInit() {\n      this.loginId = this.route.snapshot.params['loginId'];\n      this.service.getAllTweets().subscribe(response => {\n        this.tweets = response;\n\n        if (!this.tweets.length) {\n          this.tweetsToShow = \"No tweets to show.\";\n        }\n      });\n      this.service.getAllLikes().subscribe(data => {\n        this.likes = data;\n      });\n    }\n\n    updateLikes(id) {\n      this.service.getLikes(id).subscribe(response => {\n        this.like = response;\n\n        if (this.like === null) {\n          this.service.updateLikes(-1, new Likes(id, 1), this.loginId).subscribe(data => {\n            this.router.navigate(['tweets', this.loginId, 'all']).then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          this.like.likes = this.like.likes + 1;\n          this.service.updateLikes(this.like.id, this.like, this.loginId).subscribe(data => {\n            this.router.navigate(['tweets', this.loginId, 'all']).then(() => {\n              window.location.reload();\n            });\n          });\n        }\n      });\n    }\n\n    checkComments(tweetId) {\n      this.router.navigate(['tweets', this.loginId, 'comments', tweetId]);\n    }\n\n  }\n\n  TweetsComponent.ɵfac = function TweetsComponent_Factory(t) {\n    return new (t || TweetsComponent)(i0.ɵɵdirectiveInject(i1.TweetsDataService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  TweetsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TweetsComponent,\n    selectors: [[\"app-tweets\"]],\n    decls: 8,\n    vars: 2,\n    consts: [[1, \"card\"], [1, \"card-body\"], [1, \"container\"], [1, \"card-header\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [1, \"list-group\"], [\"class\", \"list-group-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"alert\", \"alert-warning\"], [1, \"list-group-item\"], [3, \"routerLink\", 4, \"ngIf\"], [1, \"nm\"], [1, \"button\"], [3, \"click\"], [1, \"material-icons\"], [\"class\", \"badge badge-primary badge-pill\", \"style\", \"background-color:rgb(33, 150, 70)\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-muted\"], [3, \"routerLink\"], [1, \"semibold\", \"ellipsis\", \"nm\", \"font-italic\"], [1, \"badge\", \"badge-primary\", \"badge-pill\", 2, \"background-color\", \"rgb(33, 150, 70)\"], [4, \"ngIf\"]],\n    template: function TweetsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵtext(4, \"Tweets\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, TweetsComponent_div_5_Template, 2, 1, \"div\", 4);\n        i0.ɵɵelementStart(6, \"ul\", 5);\n        i0.ɵɵtemplate(7, TweetsComponent_li_7_Template, 16, 8, \"li\", 6);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.tweetsToShow);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tweets);\n      }\n    },\n    directives: [i3.NgIf, i3.NgForOf, i2.RouterLinkWithHref],\n    pipes: [i3.DatePipe],\n    styles: [\"li[_ngcontent-%COMP%]{border-left:none;border-right:none;box-shadow:5px 10px #509ff9}.tweet[_ngcontent-%COMP%]{padding-bottom:1%}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;border:none;color:#509ff9}a[_ngcontent-%COMP%]{text-decoration:none}h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#594e4e}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-bottom:10px;color:#ffc096;background-color:#509ff9;font-size:larger;font-weight:600}button[_ngcontent-%COMP%]{background-color:#509ff9;color:#ffc096;font-weight:600}label[_ngcontent-%COMP%]{color:#fe9e5e;font-weight:600}.card[_ngcontent-%COMP%]{border:none}\"]\n  });\n  return TweetsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}